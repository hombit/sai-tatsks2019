W.patchVersion="2019-11-16-extended-windy-maps-promo",/*! */
W.patchHtml='<donate><div class="weather-box clickable-size size-l fg-white bg-transparent" id="donate-promo-goals" data-do="rqstOpen,donate"><img src="https://www.windy.com/img/donate/Windy-needs-your-help.svg"> <span class="button size-s btn-white" data-t="DONATE"></span><p class="size-s"></p></div></donate><maps><section class="weather-box clickable-size size-l fg-white bg-transparent" id="wm-promo"><div><img src="https://img.windy.com/albums/Windy-Maps/windy-maps-logo-male-hranate.png"> <img class="wm-logo" alt="Windy Maps" src="https://img.windy.com/albums/Windy-Maps/WindyMaps.png"> <small data-t="WM_TRY"></small></div><ul><li data-t="WM_MAP" class="inlined" data-icon="O"></li><li data-t="WM_OFFLINE" class="inlined" data-icon="Q"></li><li data-t="WM_TRACKER" class="inlined" data-icon="&#xe028;"></li><li data-t="WM_ROUTE" class="inlined" data-icon="&#xe040;"></li><li data-t="WM_OSM" class="inlined" data-icon="&#xe02e;"></li><li data-t="WM_MAP" class="inlined" data-icon="O"></li></ul><span class="button size-s btn-white" data-t="MENU_MOBILE"></span> <span class="bg-gray clickble" data-hide="true"><span class="checkbox off size-s" data-hide="true" data-t="DO_NOT_SHOW"></span></span></section></maps>',/*! */
W.patchLang={OBSOLETE_APP:"This version of Windy.com App is <b>obsolete</b> and will stop working soon. Please <b>update your Windy.com App to the latest version</b>.",WM_TRY:"try new app from creators of Windy",WM_MAP:"Detailed Worldwide hiking map",WM_OFFLINE:"100% offline use",WM_TRACKER:"Sport tracker included",WM_ROUTE:"Car, hike, bike route planner",WM_OSM:"Based on free community data",DO_NOT_SHOW:"Do not show this anymore"},/*! */
/*! */
W.tag("patch","","#plugin-patch{display:none !important}#wm-promo{overflow:hidden;position:relative;background-image:url('https://img.windy.com/albums/Windy-Maps/New-Project-3-.png');background-position:bottom right;background-size:cover;background-repeat:no-repeat}#wm-promo>div{width:100%;padding:10px;font-size:25px}#wm-promo>div img:first-child{float:left;width:55px;margin-right:15px}#wm-promo>div img.wm-logo{width:130px;margin-top:5px}#wm-promo>div small{text-shadow:0px 0px 4px black;display:block;font-size:14px;line-height:1;margin-left:10px}#wm-promo ul{display:block;clear:both;width:100%;white-space:nowrap;margin-top:10px;transition:margin 1s}#wm-promo ul.noanim{transition:none}#wm-promo ul li{text-shadow:0px 0px 4px black;font-size:20px;list-style:none;width:100%;display:inline-block;padding:0px 15px 10px 20px;line-height:1.4;overflow:hidden}#wm-promo ul li::before{font-size:1.4em}#wm-promo .button{background-color:#9D0300;border:none;position:absolute;top:5px;right:10px;color:white}#wm-promo span.bg-gray{padding:3px 8px 5px 10px;display:inline-block;float:right;border-top-left-radius:8px;opacity:.7}#promo-obsolete-app{text-shadow:0px 0px 4px black;color:white;display:block;line-height:1.6;text-align:center;overflow:hidden;letter-spacing:.1em;padding:.5em 1em}#donate-promo-goals{padding:10px 15px;letter-spacing:.02em;margin-bottom:5px}#donate-promo-goals p>div{margin:1em 0}#donate-promo-goals img{width:200px;-webkit-filter:drop-shadow(0 0 1px rgba(0,0,0,0.8));filter:drop-shadow(0 0 1px rgba(0,0,0,0.8));position:relative;left:-5px}#donate-promo-goals .third{font-size:12px;padding:2px 15px;border-radius:15px}#donate-promo-goals .button{position:absolute;top:5px;right:10px}.new::after{font-family:sans-serif;content:'New';font-size:9px;color:yellow;position:absolute;display:block;font-weight:bold;top:0;right:0;transform:rotate(45deg);text-shadow:0 0 2px rgba(0,0,0,0.63)}.settings-new::after{font-family:sans-serif;content:'New';font-size:9px;color:yellow;position:absolute;display:block;font-weight:bold;top:0;right:0;transform:rotate(45deg);text-shadow:0 0 2px rgba(0,0,0,0.63)}.settings-new::after{display:inline-block;position:relative;font-size:11px;top:-10px}","",function(){var a=W.require("2019-11-16-extended-windy-maps-promo/donationGoals"),r=(W.require("Window"),W.require("broadcast")),s=W.require("$"),e=(W.require("plugins"),W.require("http")),d=W.require("trans"),t=W.require("log"),l=W.require("promo"),n=W.require("utils"),p=W.require("rootScope"),o=W.require("store"),c=["at","ba","be","bg","ch","cy","de","dk","ee","es","fi","fr","gr","hr","hu","ie","il","is","it","lt","lu","lv","md","me","mk","mt","nl","no","pl","pt","ro","rs","se","si","sk","uk","cz"],i="ad,al,at,ax,ba,be,bg,by,ch,de,dk,ee,es,eu,fi,fo,fr,fx,gb,gg,gi,gr,hr,hu,ie,im,is,it,je,li,lt,lu,lv,mc,md,me,mk,mt,nl,no,pl,pt,ro,rs,ru,se,si,sj,sm,tr,ua,va".split(",").concat("ao,bf,bi,bj,bw,cd,cf,cg,ci,cm,cv,dj,dz,eg,eh,er,et,ga,gh,gm,gn,gq,gw,ke,km,lr,ls,ly,ma,mg,ml,mr,mu,mw,mz,na,ne,ng,re,rw,sc,sd,sh,sl,sn,so,st,sz,td,tg,tn,tz,ug,yt,za,zm,zw".split(",")).concat("ar,bo,br,cl,co,ec,fk,gf,gy,pe,py,sr,uy,ve".split(",")),u=function(t){var e=function(t){var e=t.split(".").map(Number);return 1e3*e[0]+100*e[1]+e[2]};return e(t)<=e(p.version)},m=o.get("country"),g=[{id:"obsoleteApp19",end:"2019-12-31T20:00:00.000Z",counter:1e3,delay:0,filter:function(){return"mobile"===p.target&&!u("20.0.0")},run:function(){var t=["#d49500","#d40000","#d4009b","#8400d4","#2200d4","#0d869a","#177900","#ad7100"];x('<div id="promo-obsolete-app" style="background: '+t[Math.round(Math.random()*(t.length-1))]+'" data-t="OBSOLETE_APP"></div>')}},{id:"donateMaps",end:"2019-12-31T20:00:00.000Z",counter:10,delay:36*n.tsHour,filter:function(){return"mobile"===p.target&&u("20.0.0")&&4<p.sessionCounter&&i.includes(m)},run:function(){var n=this,t=x(W.patchHtml.replace(/.*<maps>(.*)<\/maps>.*/,"$1")),e=s("ul",t),o=1,i=setInterval(function(){5<o?(o=0,e.classList.add("noanim")):e.classList.remove("noanim"),e.style.marginLeft="-"+o+"00%",o++},3e3);setTimeout(function(){e.style.marginLeft=0,clearTimeout(i)},12e4),l.hitCounter(this.id);var a=function(t){if(t&&t.target&&t.target.dataset.hide)l.neverSee(n.id);else{var e="ios"===p.platform?"https://apps.apple.com/app/apple-store/id1201228182?pt=118417623&ct=windycom-in-app&mt=8":"https://play.google.com/store/apps/details?id=cz.seznam.windymaps&utm_source=windycom&utm_medium=promomaps&utm_campaign=promomaps";window.open(e,"_system")}};t.ontouchstart=a,t.onmousedown=a,t.onclick=a,t.ontouch=a}},{id:"donateGoals3",end:"2019-12-31T20:00:00.000Z",counter:30,delay:24*n.tsHour,filter:function(){return("mobile"===p.target&&u("20.0.0")||"index"===p.target&&!p.isMobile&&!p.isTablet)&&3<p.sessionCounter&&!(0<o.get("donations").length)},run:function(){var i=this,t="https://www.windy.com/v/20.9.0.ind.22c2/lang/donate/"+o.get("usedLang")+".json";e.get(t).then(function(t){var e=t.data;Object.assign(d,e);var n=x(W.patchHtml.replace(/.*<donate>(.*)<\/donate>.*/,"$1"));a(c.includes(m)),l.hitCounter(i.id);var o=function(){return r.emit("rqstOpen","donate")};n.ontouchstart=o,n.onmousedown=o})}}],h=[{id:"satPromo",end:"2020-01-01T00:00:00.000Z",counter:10,delay:0,filter:function(){return!p.isMobileOrTablet&&3<p.sessionCounter},run:function(){"satellite"===o.get("overlay")||t.has("ov/satellite")||(l.hitCounter(this.id),setTimeout(function(){var t=s('#overlay > a[data-do="unfold,radarSat"] > div.menu-text'),e=s('#overlay > a[data-do="set,satellite"] > div.menu-text');t&&(t.classList.add("shaky"),e.classList.add("new"),setTimeout(function(){t.classList.remove("shaky"),t.classList.add("new")},5e3),setTimeout(function(){t.classList.remove("new"),e.classList.remove("new")},15e3))},2e3))}},{id:"settingsMobile",end:"2021-01-01T00:00:00.000Z",counter:20,delay:0,filter:function(){return p.isMobile&&u("20.10.0")},run:function(){var e=this;r.on("pluginOpened",function(t){"menu"===t&&setTimeout(function(){var t=s('#plugin-menu [data-do="rqstOpen,settings"]');t.classList.add("shaky"),t.classList.add("settings-new"),l.hitCounter(e.id),setTimeout(function(){t.classList.remove("shaky")},7e3)},1e3)})}}],f=Date.now(),w=function(t){return t.filter(function(t){return Date.now()<new Date(t.end).getTime()}).filter(function(t){return t.filter()}).filter(function(t){if(l.getCounter2){var e=l.getCounter2(t.id),n=e.ts,o=e.displayed;return 0===o||o<t.counter&&f-n>t.delay}return l.getCounter(t.id)<t.counter})},b=function(){return k(w(g)[0])};Object.assign(d,W.patchLang);var y=o.get("usedLang");function v(){w(h).forEach(k),o.get("hpShown")?b():o.once("hpShown",function(t){return t&&b()})}function x(t){var e=s("#articles");e.insertAdjacentHTML("beforebegin",t);var n=e.previousSibling;return d.translateDocument(n.parentNode),o.on("hpShown",function(t){!t&&n&&(n.outerHTML="",n=null)}),n}function k(t){t&&(t.html&&x(t.html),t.run?t.run.call(t):l.hitCounter(t.id))}"en"!==y&&["zh","ja","fr","de","pt","ko","it","ru","nl","cs","tr","pl","sv","fi","ro","el","hu","hr","ca","da","ar","fa","hi","sk","uk","bg","he","is","lt","et","vi","sl","sr","id","th","nb","es"].includes(y)?(null==p.patchServer&&(p.patchServer="https://www.windy.com"),e.get(p.patchServer+"/patch/index/"+W.patchVersion+"/"+y+".json").then(function(t){var e=t.data;Object.assign(d,e),v()}).catch(v)):v()}),
/*! */
W.define("2019-11-16-extended-windy-maps-promo/donationGoals",["utils","http","trans","$"],function(l,t,p,e){var c,d,u=5e5,m="USD",g=null,n=[["#d49500","#9d0300"],["#44cabe","#435da7"],["#3cc894","#2b8825"],["#df6ee1","#6c2128"]][Math.round(3*Math.random())],h=n[0],f=n[1],w=function(t){return t?t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","):""},b=function(a){var r=Date.now(),s=r+4e3,d=function(){var t,e,n,o=Math.floor(l.smoothstep(r,s,Date.now())*a),i=l.bound(Math.floor(o/u*1e3)/10,.1,100);e=(t={raisedShown:o,raisedPct:i}).raisedShown,n=t.raisedPct,g.innerHTML="<div>\n\t\t"+l.template(p.DON_DONATED2,{users:w(c)})+':\n\t\t<big class="size-l">'+w(e)+"&nbsp;"+m+'</big>\n\t</div>\n\t<div class="third" style="background: linear-gradient(to right, '+h+" 0%, "+f+" "+n+"%,  #adadad "+n+'%, #adadad 100%);">\n\t\t'+l.template(p.DON_RAISED,{raised:n})+"\n\t</div>",o<a&&window.requestAnimationFrame(d)};d()},o=function(){e("#donate-promo-goals").style.display="none"};return function(s){(g=e("#donate-promo-goals > p"))||o(),t.get("/payments/total",{cache:!1}).then(function(t){var e=t.data,n=e.eur,o=e.usd,i=e.count,a=1,r=1;s?(m="EUR",r=1/e.eurToUsd):(u=5e4*Math.round(u*e.eurToUsd/5e4),a=e.eurToUsd),d=Math.round(a*n+r*o),c=i,b(d)}).catch(o)}});