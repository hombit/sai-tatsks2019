/*! */
W.define("ImageMakerExt",["ImageMaker"],function(t){return t.extend({lerp:function(t,e,i){return t+i*(e-t)},cubicHermite:function(t,e,i,n,r){return(.5*-t+3*e*.5-3*i*.5+.5*n)*r*r*r+(t-5*e*.5+2*i-.5*n)*r*r+(.5*-t+.5*i)*r+e},bicubicFiltering:function(t,e,i){return this.cubicHermite(this.cubicHermite(t[0],t[1],t[2],t[3],e),this.cubicHermite(t[4],t[5],t[6],t[7],e),this.cubicHermite(t[8],t[9],t[10],t[11],e),this.cubicHermite(t[12],t[13],t[14],t[15],e),i)},clamp0X:function(t,e){return Math.min(Math.max(t,0),e-1)}})}),
/*! */
W.define("Row",["trans","Class","rootScope","metrics","overlays","colors"],function(t,e,i,n,r,s){return e.extend({ident:null,legendName:null,legendTrans:null,metric:null,propName:null,colors:null,acceptNullValues:!1,_init:function(){this.metric||(this.metric=this.ident),this.metricObj=n[this.metric]||null,null==this.legendTrans&&(this.legendTrans=r[this.ident]&&r[this.ident].trans||null),this.propName||(this.propName=this.ident);var t=s[this.colors];this.colorize=t?t.getColor.call(t).color.bind(t):null,this.convert=this.metricObj?this.metricObj.convertNumber.bind(this.metricObj):function(t){return t}},addClasses:function(t){return"height-"+this.ident+" d-display-"+t.display},renderLegend:function(e,i){return'<div class="legend-'+this.ident+" "+this.addClasses(e)+'"><span\n\t\t\t\t\tclass="legend-left">'+(this.legendName||t[this.legendTrans]||"")+'</span><span\n\t\t\t\t\tdata-do="metric,'+this.metric+'"\n\t\t\t\t\tclass="legend-right '+(this.metricObj?"metric-clickable":"")+'"\n\t\t\t\t\t>'+(this.metricObj&&this.metricObj.metric||"")+"</span\n\t\t\t\t\t>"+(i||"")+"</div>"},get3colors:function(t,e){var i=t[Math.max(e-1,0)],n=t[e],r=t[Math.min(e+1,t.length-1)];return'style="background: linear-gradient(to right,'+this.colorize(.5*(n+i))+","+this.colorize(n)+","+this.colorize(.5*(n+r))+')"'},renderRow:function(t,e,n){var r='<tr class="td-'+this.ident+" "+this.addClasses(e)+'">';this.length=t.hour.length,this.options=e;for(var s=t[this.propName]||[],a=0;a<s.length;a++){this.classes=[];var o=s[a];if(null!==o&&!isNaN(o)&&void 0!==o||this.acceptNullValues){var h=this.convert(o),l=this.colorize?this.get3colors(s,a):"",d=this.renderTD(o,h,t,a);t.day[a]!==t.day[Math.min(a+1,this.length-1)]&&this.classes.push("day-end");var c=n.merged&&a==n.mergedModelStart;c&&this.classes.push("secondary-model"),r+="<td "+(this.classes.length?' class="'+this.classes.join(" ")+'"':"")+"\n\t\t\t\t\t"+("hour"===this.propName?' data-ts="'+t.ts[a]+'"':"")+"\n\t\t\t\t\t"+(i.isMobile?' data-do="index,'+a+'"':"")+"\n\t\t\t\t\t"+(c?' data-model1="⇦ '+n.model+'" data-model2="'+n.mergedModelName+' ⇨"':"")+"\n\t\t\t\t\t"+l+">"+d+"</td>"}else r+="<td></td>"}return r+"</tr>"},renderTD:function(t,e){return e}})}),
/*! */
W.define("WaveRow",["Row"],function(t){return t.extend({metric:"waves",colors:"wavesDetail",renderTD:function(t,e,i,n){var r=i[this.propName+"Dir"][n];return'<div style="transform: rotate('+r+"deg);\n                    -webkit-transform:rotate("+r+'deg);">#</div>'+e}})}),
/*! */
W.define("WindCombined",["Row"],function(t){return t.extend({ident:"windCombined",metric:"wind",colors:"windDetail",renderTD:function(t,e,i,n){var r=i[this.dirPropName][n];return'<div style="transform: rotate('+r+"deg);\n                    -webkit-transform:rotate("+r+'deg);">#</div>'+e+"<small>"+this.convert(i[this.gustPropName][n])+"</small>"}})}),
/*! */
W.define("dataManipulators",[],function(){return{trimRhData:function(t,e){var i,n,r=e.data,s=r.hours,a=t,o=s.indexOf(a[0]),h=a.indexOf(s[0]);if(o<0&&h>0)for(n=0;n<h;n++)for(i in r)r[i].unshift(r[i][0]);else if(o>0)for(i in r)r[i].splice(0,o);else if(o<0)return console.error("Unable to sync data tables"),void window.wError("detail","Unable to sync data tables from begining");if(s.length>a.length)for(i in r)r[i].splice(a.length);else if(s.length<a.length){var l=a.length-s.length,d=s.length-1;for(n=0;n<l;n++)for(i in r)r[i].push(r[i][d])}return e}}}),
/*! */
W.define("iMakerExtended",["iMaker","ImageGraph","ImageMaker"],function(t,e,i){return t.pressure=e.extend({bottomWhitten:!1,strokeStyle:"rgba(91, 126, 158, 0.3)",lineWidth:1}),t.dewpointTemp=t.temp.extend({render:function(t,e,i){void 0===i&&(i=1),this.checkData(t),this.checkData(e);for(var n,r=this.ctx,s=t.length,a=this.tdWidth,o=a>>1,h=this.h,l=[],d=[],c=-1/0,u=1/0,m=-a-o,f=0;f<s;++f){var p=t[f];p<u?u=p:p>c&&(c=p)}for(u-=1,(n=(c=(u-=Math.round(.05*(c-u)))+Math.round(c-u))-u)<10&&(n=Math.round(.5*(10-n)),u-=Math.round(.5*n),c+=Math.round(1.5*n)),this.t0_=u,this.t1_=c,f=0;f<s+4;++f){var g=Math.max(0,Math.min(f-2,s-1)),v=t[g],w=Math.max(e[g]-.5,u);l.push([m,this.getY(v,u,c,h),v]),d.push([m,this.getY(w,u,c,h),w]),m+=a}for(f=0;f<s;++f)l[f+2][1]=.6*l[f+2][1]+.15*(l[f+1][1]+l[f+3][1])+.05*(l[f][1]+l[f+4][1]),d[f+2][1]=.6*d[f+2][1]+.15*(d[f+1][1]+d[f+3][1])+.05*(d[f][1]+d[f+4][1]);for(r.beginPath(),r.moveTo(l[1][0],h),r.lineTo(l[1][0],l[1][1]),f=0;f<s+1;++f){var b=this.getControlPoint(l[f],l[f+1],l[f+2]),T=this.getControlPoint(l[f+3],l[f+2],l[f+1]);r.bezierCurveTo(b[0],b[1],T[0],T[1],l[f+2][0],l[f+2][1])}for(r.lineTo(d[f+2][0],d[f+2][1]),f=s;f>=0;--f){var x=this.getControlPoint(d[f+3],d[f+2],d[f+1]),D=this.getControlPoint(d[f],d[f+1],d[f+2]);r.bezierCurveTo(x[0],x[1],D[0],D[1],d[f+1][0],d[f+1][1])}return r.fillStyle=this.createGradient(u,c,i),r.fill(),this}}),t.rain=i.extend({mm2h:function(t){return(t=(t-=.2)<3?t/3*.25:t<10?(t-3)/7*.25+.25:t<20?(t-10)/10*.25+.5:Math.min(.9,(t-20)/30*.25+.75))*this.h},spline:function(t,e,i,n,r){return.5*(2*e+(-t+i)*r+(2*t-5*e+4*i-n)*r*r+(3*e-t-3*i+n)*r*r*r)},render:function(t){var e=t.mm;this.ctx.save(),this.ctx.transform(1,0,0,-1,0,this.h);for(var i=0;i<e.length;i++)this.paintRainPiece(e,i);return this.ctx.restore(),this},computeInterValues:function(t,e){return[t[Math.max(e-2,0)],t[Math.max(e-1,0)],t[e],t[Math.min(e+1,t.length-1)],t[Math.min(e+2,t.length-1)]]},paintRainPiece:function(t,e){var i,n=this.computeInterValues(t,e),r=e*this.tdWidth,s=n.map(this.mm2h.bind(this));for(this.ctx.fillStyle="#CEF1FA",this.ctx.beginPath(),this.ctx.moveTo(r,0),i=.5;i<=1;i+=.1)this.ctx.lineTo(r+this.tdWidth*(i-.5),this.spline(s[0],s[1],s[2],s[3],i));for(i=0;i<=.5;i+=.1)this.ctx.lineTo(r+this.tdWidth*(i+.5),this.spline(s[1],s[2],s[3],s[4],i));this.ctx.lineTo(r+this.tdWidth,0),this.ctx.fill()}}),t}),
/*! */
W.define("meteogram",["ImageMakerExt"],function(t){return t.instance({cLine:"rgba(0,0,0,0.1)",cText:"rgba(0,0,0,0.4)",hrParsAlt1:[-70,.038,6],hrParsAlt0:[-60,.025,4],hrLerpFactorPow:1,hrPow2:.7,hrAltName:[null,"950h","925h","900h","850h","800h","700h","600h","500h","400h","300h","200h","150h",null],hrAlt:[0,5,11,16.7,25,33.4,50,58.4,66.7,75,83.3,92,98,100],txAlt:["","900h 900m 3000ft","800h 2km 6400ft","700h 3km FL100","500h 5km FL180","300h 9km FL300"],prepareStepLut:function(){this.clut=new Uint8Array(256);for(var t=0;t<160;t++)this.clut[t]=this.clamp0X(24*Math.floor((t+12)/16),160)},step:function(t){return this.clut[Math.floor(this.clamp0X(t,160))]},legend:function(){var t,e,i=this.ctx,n=this.h,r=n/6,s=0;for(i.font="8px Verdana",i.fillStyle=this.cText,i.setLineDash([4,4]),i.lineWidth=1,i.strokeStyle=this.cLine,i.beginPath(),t=1;t<6;t++)for(n-=r,e=0;e<2;e++)s=0,e&&(s=this.w,i.moveTo(0,n),i.lineTo(this.w,n)),i.textAlign=e?"right":"left",i.fillText(" "+this.txAlt[t]+" ",s,n+8+2);i.stroke(),i.setLineDash([])},render:function(t){var e,i,n,r,s,a,o,h,l,d,c=this.getPixelRatioAdjustedSize(this.tdWidth),u=c*this.num,m=this.getPixelRatioAdjustedSize(this.h),f=this,p=t.data,g=p["rh-1000h"].length,v=g-g,w=g,b=f.hrAltName.length,T=w-v,x=T*b,D=new Float32Array(x+x),M=0;for(i=0;i<b;++i)if(null==f.hrAltName[i])for(e=v;e<w;++e)D[M++]=0,D[M++]=0;else for(n=p["rh-"+f.hrAltName[i]],r=.01*f.hrAlt[i],s=f.lerp(this.hrParsAlt0[0],this.hrParsAlt1[0],r),a=f.lerp(this.hrParsAlt0[1],this.hrParsAlt1[1],r),o=f.lerp(this.hrParsAlt0[2],this.hrParsAlt1[2],r),h=1-.8*Math.pow(r,this.hrPow2),e=v;e<w;++e)l=Number(n[e]),d=Math.max(0,Math.min((l+s)*a,1)),d=Math.pow(d,o)*h,D[M++]=d,D[M++]=l;var y=document.createElement("canvas");y.width=u,y.height=m;var N,P,C,W,A,H,E,k,L,R,S,I,O,_,U,F,z,j,X,V,Z,G,J,Y=y.getContext("2d"),B=Y.getImageData(0,0,u,m),K=B.data,$=.01*(m-1),q=m,Q=c+1>>1,tt=m+m,et=new Int32Array(tt),it=new Float32Array(16);for(void 0===this.clut&&this.prepareStepLut(),i=0;i<b-1;++i)for(N=q,q=Math.round(m-1-f.hrAlt[i+1]*$),C=(P=T+T)*this.clamp0X(i+2,b),W=P*this.clamp0X(i+1,b),A=P*this.clamp0X(i+0,b),H=P*this.clamp0X(i-1,b),E=0,k=Q,R=1/(L=N-q),e=0;e<T+1;++e){if(S=2*this.clamp0X(e-2,T),I=2*this.clamp0X(e-1,T),O=2*this.clamp0X(e+0,T),_=2*this.clamp0X(e+1,T),it[0]=D[C+S],it[1]=D[C+I],it[2]=D[C+O],it[3]=D[C+_],it[4]=D[W+S],it[5]=D[W+I],it[6]=D[W+O],it[7]=D[W+_],it[8]=D[A+S],it[9]=D[A+I],it[10]=D[A+O],it[11]=D[A+_],it[12]=D[H+S],it[13]=D[H+I],it[14]=D[H+O],it[15]=D[H+_],F=1/(U=k-E),z=4*(q*u+E),0===e&&L>0)for(j=1/L,X=0;X<L;X++)et[--tt]=i,et[--tt]=Math.round(1e4*j*X);for(V=0;V<L;++V)for(Z=z+V*u*4,G=0;G<U;++G)J=this.step(160*f.bicubicFiltering(it,F*G,R*V)),K[Z++]=255-J,K[Z++]=255-J,K[Z++]=255-J,K[Z++]=J>10?255:0;E=k,(k+=c)>u&&(k=u)}return Y.putImageData(B,0,0),this.ctx.drawImage(y,0,0,this.w,this.h),this.legend(),this}})}),
/*! */
W.define("multiLoad",["utils","http"],function(t,e){var i=function(e){var i=e.reduce(function(t,e){var i=e.fcst;return Math.max(t,i.data.ts[0])},0);return e.forEach(function(t){for(var e=t.fcst,n=e.data.ts,r=0;n[r]<i;)r++;for(var s in e.data)e.data[s].splice(0,r)}),e.forEach(function(e){var i=e.fcst,n=i.data.day,r=i.summary,s=Object.keys(r)[0];n[0].localeCompare(s,"en")>0&&delete r[s],t.each(r,function(t,e){t.index=n.indexOf(e),t.segments=n.filter(function(t){return t===e}).length})}),e};return function(n,r){return new Promise(function(s){Promise.all(r.map(function(i){return new Promise(function(r){var s=t.getFcstUrl(i,n,"multiload");e.get(s).then(function(t){var e=t.data;return r(e?{model:i,fcst:e}:null)}).catch(function(){return r(null)})})})).then(function(t){var e=t?i(t.filter(function(t){return t&&t.fcst})):[];s(e)}).catch(function(t){window.wError("multiLoad","Loading/rendering models",t)})})}}),
/*! */
W.define("weatherRenderExtended",["format","$","utils","weatherTable","weatherRender","iMakerExtended","trans","meteogram","store"],function(t,e,i,n,r,s,a,o,h){return Object.assign(r,{syncCounter:0,renderLegend:function(t){var e=this;return'<div class="legend-days height-days"><span class="legend-left"></span><span class="legend-right"></span></div>\n                \t'+(t?t.rows:this.rows).map(function(i){return n[i].renderLegend(t||e.options)}).join("")},renderInfo:function(){var e=this.json.header,i="",n=t.howOld({ts:new Date(e.update).getTime()||e.update,translate:!0});return i+="<span>"+a.MENU_D_UPDATED+": "+n+"</span>"},renderAboutLocation:function(i){var n=i.header,r=i.celestial;try{var s=e(".services-container",this.el),o=h.get("zuluMode"),l=t.getHoursFunction(),d=function(e,i){var n=e.split(":"),r=l(+n[0],+n[1]);return o?r+"&nbsp;("+t.hourMinuteUTC(i)+")":r},c="<li>"+t.DD2DMS(this.options.lat,this.options.lon)+"</li>\n\t\t\t\t\t<li>"+n.tzName+" ("+r.TZoffsetFormatted+")</li>\n\t\t\t\t\t"+(r.sunrise?'<li class="first-big">'+a.D_SUNRISE+": "+d(r.sunrise,r.sunriseTs)+"</li>":"")+"\n\t\t\t\t\t"+(r.sunset?'<li class="first-big">'+a.D_SUNSET+": "+d(r.sunset,r.sunsetTs)+"</li>":"")+"\n\t\t\t\t\t"+(r.dusk?'<li class="first-big">'+a.D_DUSK+": "+d(r.dusk,r.duskTs)+"</li>":"")+'\n\t\t\t\t\t<li class="first-big">'+a.ALTITUDE+": "+parseInt(n.elevation)+"m ("+parseInt(3.28*n.elevation)+"ft)</li>";s.style.height=this.getHeight()+"px",s.innerHTML=c}catch(t){window.wError("detail-render","Failed to render about locaiton",t)}return this},renderTableDays:function(){var t='<tr class="td-days height-days">';return this.giveMeDays(function(e,i){t+='<td colspan="'+i+'" class="sticky-title-wrapper"',t+=i>3?' data-day="'+e.date+'"><div class="sticky-title" data-daydiv="'+e.date+'">'+a[e.weekday]+" "+e.day+"</div></td>":">&nbsp;</td>"}),t+="</tr>"},renderMeteogram:function(t){if(this.canvas){var e=this.getHeight()-110;return this.rows.includes("cbase")&&(e-=17),o.mixinCanvas(this.canvas).setHeight(110).setOffset(e).render(t).resetCanvas(),this.rows.includes("pressure")&&s.pressure.mixinCanvas(this.canvas).setHeight(80).setOffset(e+15).render(this.data.pressure).resetCanvas(),this}},renderAirgram:function(t){if(this.canvas)return W.airgram.mixinCanvas(this.canvas).setHeight(273).setOffset(0).render(t),this},tmpHeights:{table:100,meteogram:85,wind:0,waves:0},renderBackground:function(t){var i,n=t&&t.tempH||this.tmpHeights[this.options.display],r=e(".forecast-table canvas",this.el);return this.canvas=s.canvas.init(r,this.dataLength,this.tdWidth,this.getHeight()),s.dayNight.mixinCanvas(this.canvas).render(this.data),n&&(this.options.zuluMode&&(n+=18),"meteogram"===this.options.display?s.dewpointTemp.mixinCanvas(this.canvas).setHeight(n).render(this.data.temp,this.data.dewPoint):s.temp.mixinCanvas(this.canvas).setHeight(n).render(this.data.temp)),(i=e(".td-rain td:first-child",this.tableEl))&&s.rain.mixinCanvas(this.canvas).setHeight(30).setOffset(i.offsetTop+i.offsetHeight-58).render(this.data,.3).resetCanvas(),this},init:function(t,n,r){return this.options=r||{},this.weatherData(n,r),this.tdWidth=this.options.tdWidth,this.rows=r.rows,this.header=n.header,this.start=this.data.ts[0],this.hours=this.dataLength,this.end=this.data.ts[this.hours-1],this.tsWidth=this.hours*r.step*i.tsHour,this.pxWidth=this.hours*this.tdWidth,this.px2ts=this.tsWidth/this.pxWidth,this.nowPosition=(Date.now()-this.start+.5*r.step*i.tsHour)/this.px2ts,this.step=r.step,this.options.is12hFormat=h.is12hFormat(),this.options.zuluMode=h.get("zuluMode"),this.options.zuluMode&&"hourZulu"!==this.rows[1]&&this.rows.splice(1,0,"hourZulu"),this.el=t,this.tableEl=e(".forecast-table table",t),this.syncCounter++,this},renderTable:function(){var t,i=this,r=e(".legend",this.el),s=e(".data-table",this.el);r.innerHTML=this.renderLegend(),(t=e(".model-info",this.el))&&(t.innerHTML=this.renderInfo());var a=this.renderTableDays();return this.rows.forEach(function(t){a+=n[t].renderRow(i.data,i.options,i.header)}),this.tableEl.innerHTML=a,this.tableEl.style.width=e(".forecast-table",this.el).style.minWidth=this.hours*this.options.tdWidth+"px",s&&(s.style.height=r.offsetHeight+"px"),e(".forecast-table b",this.el).style.left=this.nowPosition+"px",this},getHeight:function(){return this.tableEl.offsetHeight-e("tr:first-child",this.tableEl).offsetHeight}})}),
/*! */
W.define("weatherTable",["products","Row","WaveRow","WindCombined","rootScope","trans","overlays","utils"],function(t,e,i,n,r,s,a,o){var h={};return h.hour=e.instance({ident:"hour",legendTrans:"D_HOURS",renderTD:function(t,e,i,n){return this.options.timestamps&&this.options.timestamps.includes(i.ts[n])&&this.classes.push("triggered"),this.options.is12hFormat?(t>0?(t+11)%12+1:0)+"<small>"+(t>=12?"PM":"AM")+"</small>":t}}),h.hourZulu=e.instance({ident:"hourZulu",propName:"ts",renderTD:function(t){return o.pad(new Date(t).getUTCHours())+"Z"}}),h.icon=e.instance({ident:"icon",propName:"icon2",renderTD:function(t,e,i,n){var s=i.isDay[n],a=i.moonPhase[n],o=1>s&&s>.5||-.5<s&&s<=0?"_night_"+a:"";return'<img src="'+r.iconsDir+"/png_25px/"+t+o+'.png"\n                    srcset="'+r.iconsDir+"/png_25@2x/"+t+o+'.png 2x">'}}),h.temp=e.instance({ident:"temp",renderTD:function(t,e){return e+"°"}}),h.tempCombined=e.instance({ident:"tempCombined",propName:"temp",metric:"temp",legendName:s.TEMP+"<br>"+s.DEW_POINT,renderTD:function(t,e,i,n){return e+"°<small>"+this.convert(i.dewPoint[n])+"°</small>"}}),h.pressure=e.instance({ident:"pressure",renderTD:function(t,e,i,n){var r=i.pressure,s=r.length-1,a=r[Math.max(0,n-1)],o=r[Math.min(s,n+1)];return t>a&&t>o?e:t<a&&t<o?e:""}}),h.airTemp=e.instance({ident:"airTemp",metric:"temp",acceptNullValues:!0,legendTrans:"TEMP",renderTD:function(){return""}}),h.wind=e.instance({ident:"wind",colors:"windDetail"}),h.windCombined=n.instance({propName:"wind",legendName:s.WIND+"<br>"+s.GUST,renderTD:function(t,e,i,n){var r=i.windDir[n];return'<div style="transform: rotate('+r+"deg);\n                    -webkit-transform:rotate("+r+'deg);">#</div>'+e+"<small>"+("gust"in i?this.convert(i.gust[n]):"-")+"</small>"}}),h.gust=e.instance({ident:"gust",metric:"wind",colors:"windDetail"}),h.windDir=e.instance({ident:"windDir",legendTrans:"WIND_DIR",renderTD:function(t){return'<div style="transform: rotate('+t+"deg); -webkit-transform:rotate("+t+'deg);">4</div>'}}),h.rain=e.instance({ident:"rain",legendTrans:"JUST_RAIN",propName:"mm",renderTD:function(t,e,i,n){var r=i.warnings&&i.warnings[n],s=r&&/^[MSE][RT]/.test(r);return i.snow[n]&&t>.1?(this.classes.push("snow"),(t=a.snowAccu.convertNumber(t))>1&&(t=Math.round(t)),t+=a.snowAccu.metric):!i.snow[n]&&t>.1?((t=e)>5&&(t=Math.round(t)),s&&(t+="!")):t="",t}}),h.rainClouds=e.instance({ident:"rainClouds",metric:"rain",propName:"mm",legendTrans:"CLOUDS",maxDivHeight:50,renderLegend:function(t){return e.renderLegend.call(this,t,'<div><span class="legend-left l-rc-note l-rc-rain" data-t="JUST_RAIN"></span><span class="legend-right iconfont l-rc-rain">9</span></div>\n         <div><span class="legend-left l-rc-note l-rc-conv" data-t="CONVECTIVE_RAIN"></span><span class="legend-right iconfont l-rc-conv">~</span></div>\n         <div><span class="legend-left l-rc-note l-rc-snow" data-t="SNOW"></span><span class="legend-right iconfont l-rc-snow">8</span></div>')},rainHeight:function(t){return t<5?7*t:35+1*(t-5)},renderTD:function(t,e,i,n){var r="",s="",o=i.snow[n]&&i.snowPrecip[n]||0,h=i.convPrecip&&i.convPrecip[n]||0,l=i.mm[n]-o-h,d=o>.1?o<5?10*o:50+2.5*(o-5):0,c=l>.1?this.rainHeight(l):0,u=h>.1?this.rainHeight(h):0,m=(d+c+u)/this.maxDivHeight;return m>1&&(d/=m,c/=m,u/=m),d&&((o=a.snowAccu.convertNumber(o))>1&&(o=Math.round(o)),r='<div class="td-m-snow">'+o+a.snowAccu.metric+"</div>",s='<div class="td-m-snowbar" style="height: '+d+'px;"></div>'),c&&((l=this.convert(l))>5&&(l=Math.round(l)),r+='<div class="td-m-rain">'+l+"</div>",s+='<div class="td-m-rainbar" style="height: '+c+'px;"></div>'),u&&((h=this.convert(h))>5&&(h=Math.round(h)),r+='<div class="td-m-conv">'+h+"</div>",s+='<div class="td-m-convbar" style="height: '+u+'px;"></div>'),""+r+s}}),h.cbase=e.instance({ident:"cbase",metric:"altitude",legendTrans:"CLOUD_ALT",colors:"altitudeDetail",renderRow:function(t,i,n){for(var r=t.cbase,s=0;s<r.length;s++){var a=r[s];(null===a||isNaN(a)||void 0===a)&&(r[s]=1e5)}return e.renderRow.call(this,t,i,n)},renderTD:function(t,e){return e>5e4?"--":e>1e4?Math.floor(e/1e3)+"k":e}}),h.waves=i.instance({ident:"waves"}),h.swell1=i.instance({ident:"swell1"}),h.swell1Period=e.instance({metric:"period",colors:"periodDetail",ident:"swell1Period",legendTrans:"SWELLPER"}),r.globalPointProducts.concat(r.localPointProducts).forEach(function(e){var i=e+"/windCombined",r=t[e];h[i]=n.instance({model:e,propName:e+"/wind",dirPropName:e+"/windDir",gustPropName:e+"/gust",legendName:r.modelName+(r.modelResolution?"&nbsp;"+r.modelResolution+"km":"")})}),h.windCombinedEmpty=n.instance({propName:"hours",legendName:"&nbsp;",renderTD:function(){return"&nbsp;"}}),h});